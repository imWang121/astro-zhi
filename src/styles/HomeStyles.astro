---
/**
 * 首页样式组件
 * 包含：个人介绍、关于我、联系方式、最近文章、元宝派弹窗样式
 * 使用 is:global 使样式全局生效
 */
---

<style is:global>
	/* ========================================
	   基础布局
	   ======================================== */
	main {
		display: flex;
		flex-direction: column;
		padding: 0 1rem;
	}

	.home-container {
		max-width: 700px;
		width: 100%;
		margin: 0 auto;
		padding-top: 2rem;
		padding-bottom: 2rem;
	}

	/* ========================================
	   个人介绍区块
	   ======================================== */
	.home-intro {
		margin-bottom: 3rem;
	}

	.intro-label {
		font-family: var(--font-serif);
		font-size: 0.875rem;
		color: var(--color-gray-400);
		text-transform: uppercase;
		letter-spacing: 0.15em;
		margin-bottom: 0.5rem;
	}

	.intro-name {
		font-family: var(--font-serif);
		font-size: 4rem;
		font-weight: 500;
		color: var(--color-black);
		margin: 0 0 0.75rem 0;
		line-height: 1;
		letter-spacing: -0.02em;
	}

	.intro-tagline {
		font-family: var(--font-sans-serif);
		font-size: 1rem;
		color: var(--color-gray-500);
		margin: 0;
	}

	.intro-image-wrapper {
		display: flex;
		flex-direction: column;
		align-items: flex-start;
	}

	.intro-image {
		max-width: 100%;
		height: auto;
		border-radius: 4px;
	}

	.intro-caption {
		font-family: var(--font-serif);
		font-size: 0.875rem;
		color: var(--color-gray-400);
		margin: 0.75rem 0 0 0;
		font-style: italic;
	}

	/* ========================================
	   关于我区块
	   ======================================== */
	.home-about {
		margin-bottom: 3rem;
	}

	.home-about p {
		font-family: var(--font-serif);
		font-size: 0.9375rem;
		color: var(--color-gray-600);
		line-height: 1.85;
		margin: 0 0 1rem 0;
	}

	.home-about p:last-child {
		margin-bottom: 0;
	}

	.home-about a {
		color: var(--color-gray-700);
		text-decoration: underline;
		text-underline-offset: 2px;
	}

	.home-about a:hover {
		color: var(--color-black);
	}

	.home-about .note {
		font-size: 0.625rem;
		color: var(--color-gray-400);
		vertical-align: super;
		margin-left: 0.125rem;
		font-family: var(--font-sans-serif);
	}

	/* ========================================
	   联系方式区块
	   ======================================== */
	.home-content {
		margin-bottom: 3rem;
		text-align: left;
		opacity: 0;
	}

	.home-content.visible {
		opacity: 1;
		transition: opacity 0.3s ease;
	}

	.contact-header {
		display: flex;
		align-items: center;
		justify-content: space-between;
		margin-bottom: 1.5rem;
	}

	.contact-label-title {
		font-family: var(--font-serif);
		font-size: 0.875rem;
		color: var(--color-gray-400);
		text-transform: uppercase;
		letter-spacing: 0.15em;
	}

	.contact-links {
		display: flex;
		justify-content: flex-start;
		gap: 1rem;
		flex-wrap: wrap;
	}

	.contact-link {
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		text-decoration: none;
		padding: 0.625rem 1.25rem;
		border: none;
		border-radius: 9999px;
		transition: all 0.3s ease;
		background: var(--color-gray-100);
	}

	.contact-link:hover {
		background: var(--color-gray-200);
		transform: translateY(-2px);
	}

	.yuanbao-btn {
		cursor: pointer;
		font-family: inherit;
	}

	.contact-icon {
		font-size: 1rem;
		color: var(--color-gray-600);
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.contact-icon svg {
		width: 1rem;
		height: 1rem;
	}

	.yuanbao-icon-img {
		width: 1rem;
		height: 1rem;
		display: block;
	}

	.contact-label {
		font-family: var(--font-serif);
		font-size: 0.875rem;
		color: var(--color-gray-700);
	}

	/* ========================================
	   最近文章区块
	   ======================================== */
	.home-posts {
		margin-bottom: 3rem;
	}

	.posts-header {
		display: flex;
		align-items: center;
		justify-content: space-between;
		margin-bottom: 1.5rem;
	}

	.posts-label {
		font-family: var(--font-serif);
		font-size: 0.875rem;
		color: var(--color-gray-400);
		text-transform: uppercase;
		letter-spacing: 0.15em;
	}

	.posts-more {
		font-family: var(--font-serif);
		font-size: 0.8125rem;
		color: var(--color-gray-500);
		text-decoration: none;
		transition: color 0.2s ease;
	}

	.posts-more:hover {
		color: var(--color-black);
	}

	.posts-list {
		display: flex;
		flex-direction: column;
	}

	/* ========================================
	   项目区块
	   ======================================== */
	.home-projects {
		margin-bottom: 3rem;
	}

	.projects-header {
		margin-bottom: 1.5rem;
	}

	.projects-label {
		font-family: var(--font-serif);
		font-size: 0.875rem;
		color: var(--color-gray-400);
		text-transform: uppercase;
		letter-spacing: 0.15em;
	}

	.projects-grid {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: 1rem;
	}

	.project-card {
		display: block;
		text-decoration: none;
		border-radius: 12px;
		overflow: hidden;
		background: var(--color-white);
		transition: transform 0.3s ease, box-shadow 0.3s ease;
	}

	.project-card:hover {
		transform: translateY(-4px);
		box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
	}

	.project-image {
		width: 100%;
		aspect-ratio: 16 / 10;
		object-fit: cover;
		display: block;
		background: var(--color-gray-100);
	}

	.project-content {
		padding: 1rem;
		display: flex;
		flex-direction: column;
		align-items: flex-start;
		text-align: left;
		gap: 0.25rem;
	}

	.project-header {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		justify-content: flex-start;
		width: 100%;
	}

	.project-name {
		font-family: var(--font-serif);
		font-size: 0.9375rem;
		font-weight: 500;
		color: var(--color-black);
		margin: 0;
	}

	.project-arrow {
		font-size: 0.875rem;
		color: var(--color-gray-400);
		transition: transform 0.2s ease;
	}

	.project-card:hover .project-arrow {
		transform: translateX(3px);
	}

	.project-desc {
		font-family: var(--font-serif);
		font-size: 0.8125rem;
		color: var(--color-gray-500);
		margin: 0;
		line-height: 1.5;
		text-align: left;
		width: 100%;
	}

	@media (max-width: 480px) {
		.projects-grid {
			grid-template-columns: 1fr;
		}
	}

	.post-item {
		display: flex;
		align-items: flex-start;
		justify-content: space-between;
		gap: 1.5rem;
		padding: 1.25rem 0;
		border-bottom: 1px solid var(--color-gray-100);
		text-decoration: none;
		transition: all 0.2s ease;
	}

	.post-item:first-child {
		border-top: 1px solid var(--color-gray-100);
	}

	.post-item:hover .post-title {
		color: var(--color-gray-600);
	}

	.post-info {
		flex: 1;
		min-width: 0;
	}

	.post-title {
		font-family: var(--font-serif);
		font-size: 1rem;
		font-weight: 500;
		color: var(--color-black);
		margin: 0 0 0.375rem 0;
		transition: color 0.2s ease;
		line-height: 1.4;
	}

	.post-desc {
		font-family: var(--font-sans-serif);
		font-size: 0.8125rem;
		color: var(--color-gray-500);
		margin: 0;
		line-height: 1.5;
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}

	.post-date {
		font-family: var(--font-serif);
		font-size: 0.75rem;
		color: var(--color-gray-400);
		white-space: nowrap;
		flex-shrink: 0;
		padding-top: 0.25rem;
	}

	/* ========================================
	   元宝派弹窗
	   ======================================== */
	.yuanbao-modal {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 1000;
		display: none;
		align-items: center;
		justify-content: center;
	}

	.yuanbao-modal.active {
		display: flex;
	}

	.modal-overlay {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(0, 0, 0, 0.6);
		backdrop-filter: blur(8px);
	}

	.modal-content {
		position: relative;
		background: #ffffff;
		border-radius: 20px;
		padding: 2.5rem 2rem;
		text-align: center;
		max-width: 420px;
		width: 90%;
		animation: modalIn 0.3s ease;
		box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
	}

	@keyframes modalIn {
		from {
			opacity: 0;
			transform: scale(0.9) translateY(20px);
		}
		to {
			opacity: 1;
			transform: scale(1) translateY(0);
		}
	}

	.modal-close {
		position: absolute;
		top: 1rem;
		right: 1rem;
		background: none;
		border: none;
		font-size: 1.5rem;
		color: #999;
		cursor: pointer;
		padding: 0;
		line-height: 1;
		opacity: 0.5;
		transition: opacity 0.2s;
	}

	.modal-close:hover {
		opacity: 1;
	}

	.modal-brand {
		margin-bottom: 1.25rem;
	}

	.brand-logo {
		width: 80px;
		height: auto;
		display: block;
		margin: 0 auto;
	}

	.modal-desc {
		font-family: var(--font-serif);
		font-size: 0.9375rem;
		color: #666;
		margin: 0 0 1.5rem 0;
	}

	.modal-body {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 1.5rem;
	}

	.modal-number {
		background: #f5f5f5;
		border-radius: 12px;
		padding: 1rem 1.25rem;
		text-align: center;
	}

	.number-label {
		display: block;
		font-family: var(--font-sans-serif);
		font-size: 0.75rem;
		color: #999;
		margin-bottom: 0.375rem;
	}

	.number-value {
		font-family: var(--font-serif);
		font-size: 1.125rem;
		font-weight: 500;
		color: #1a1a1a;
		letter-spacing: 0.08em;
	}

	.modal-qrcode {
		text-align: center;
	}

	.qrcode-img {
		width: 100px;
		height: 100px;
		border-radius: 8px;
	}

	.qrcode-hint {
		font-family: var(--font-serif);
		font-size: 0.75rem;
		color: #999;
		margin: 0.5rem 0 0 0;
	}

	@media (max-width: 480px) {
		.modal-content {
			max-width: 300px;
		}

		.modal-body {
			flex-direction: column;
			gap: 1rem;
		}

		.number-value {
			font-size: 1.25rem;
			letter-spacing: 0.1em;
		}

		.qrcode-img {
			width: 120px;
			height: 120px;
		}
	}

	.contact-text {
		font-family: var(--font-serif);
		font-size: 0.9375rem;
		color: var(--color-gray-600);
		margin: 0 0 1.5rem 0;
	}

	.project-placeholder {
		padding: 2rem 0;
		text-align: center;
	}

	.placeholder-text {
		font-family: var(--font-serif);
		font-size: 0.875rem;
		color: var(--color-gray-400);
		margin: 0;
	}

	/* ========================================
	   响应式样式 - 移动端适配
	   ======================================== */
	@media (max-width: 768px) {
		main {
			padding: 0 1.5rem;
		}

		.home-container {
			padding-top: 1.5rem;
		}

		/* 个人介绍 */
		.home-intro {
			margin-bottom: 1.5rem;
		}

		.intro-name {
			font-size: 2.5rem;
		}

		.intro-tagline {
			font-size: 0.875rem;
		}

		/* 关于我 */
		.home-about {
			margin-bottom: 3rem;
		}

		.home-about p {
			font-size: 0.875rem;
		}

		/* 联系方式 */
		.home-content {
			margin-bottom: 2rem;
		}

		.contact-links {
			gap: 0.75rem;
		}

		.contact-link {
			padding: 0.5rem 1rem;
		}

		.contact-label {
			font-size: 0.8125rem;
		}

		/* 最近文章 */
		.home-posts {
			margin-bottom: 2rem;
		}

		.posts-label {
			font-size: 0.75rem;
		}

		.posts-more {
			font-size: 0.75rem;
		}

		.post-item {
			flex-direction: column;
			gap: 0.5rem;
			padding: 1rem 0;
		}

		.post-title {
			font-size: 0.9375rem;
		}

		.post-desc {
			font-size: 0.75rem;
		}

		.post-date {
			padding-top: 0;
		}

		/* 弹窗 */
		.modal-content {
			padding: 2rem 1.5rem;
		}

		.brand-logo {
			width: 60px;
		}

		.modal-desc {
			font-size: 0.875rem;
		}

		.number-value {
			font-size: 1.125rem;
		}

		/* 项目 */
		.home-projects {
			margin-bottom: 3rem;
		}

		.projects-label {
			font-size: 0.75rem;
		}

		.project-card {
			padding: 1rem 0;
		}

		.project-name {
			font-size: 0.9375rem;
		}

		.project-desc {
			font-size: 0.75rem;
		}

		.project-arrow {
			font-size: 1rem;
		}
	}
</style>

<script>
	/**
	 * Contact section scroll animation
	 * Adds visible class when element enters viewport
	 */
	const homeContent = document.querySelector('.home-content');
	
	if (homeContent) {
		const observer = new IntersectionObserver((entries) => {
			entries.forEach(entry => {
				if (entry.isIntersecting) {
					entry.target.classList.add('visible');
					observer.unobserve(entry.target);
				}
			});
		}, {
			threshold: 0.2,
			rootMargin: '0px 0px -50px 0px'
		});
		
		observer.observe(homeContent);
	}

	/**
	 * Modal interactions
	 * Supports opening via button click, closing via overlay/close button/ESC key
	 */
	const modals = document.querySelectorAll('.yuanbao-modal');
	
	modals.forEach((modal) => {
		const modalId = modal.id;
		const btnId = modalId.replace('Modal', 'Btn');
		const btn = document.getElementById(btnId);
		const closeBtn = modal.querySelector('.modal-close');
		const overlay = modal.querySelector('.modal-overlay');

		if (btn && modal) {
			// Open modal
			btn.addEventListener('click', () => {
				modal.classList.add('active');
				document.body.style.overflow = 'hidden';
			});

			// Close modal function
			const closeModal = () => {
				modal.classList.remove('active');
				document.body.style.overflow = '';
			};

			// Click close button
			closeBtn?.addEventListener('click', closeModal);
			// Click overlay
			overlay?.addEventListener('click', closeModal);
		}
	});

	// ESC key to close active modal
	document.addEventListener('keydown', (e) => {
		if (e.key === 'Escape') {
			const activeModal = document.querySelector('.yuanbao-modal.active');
			if (activeModal) {
				activeModal.classList.remove('active');
				document.body.style.overflow = '';
			}
		}
	});
</script>
